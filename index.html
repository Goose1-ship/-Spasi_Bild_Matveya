<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–°–ø–∞—Å–∏ –±–∏–ª–¥ –ú–∞—Ç–≤–µ—è</title>
  <style>
    body {
      margin: 0;
      background: #111;
      overflow: hidden;
      color: #0f0;
      font-family: monospace;
    }
    #game {
      position: relative;
      width: 100vw;
      height: 100vh;
      background: #222;
    }
    .player, .bug, .coffee {
      position: absolute;
      width: 40px;
      height: 40px;
    }
    .player {
      background: url('https://cdn-icons-png.flaticon.com/512/4712/4712075.png') no-repeat center/contain;
    }
    .bug {
      background: url('https://cdn-icons-png.flaticon.com/512/3524/3524388.png') no-repeat center/contain;
    }
    .coffee {
      background: url('https://cdn-icons-png.flaticon.com/512/415/415733.png') no-repeat center/contain;
    }
    #score {
      position: absolute;
      top: 10px;
      left: 10px;
      color: #0f0;
      font-size: 20px;
      z-index: 10;
    }
    #bsod, #certificate {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      display: none;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      padding: 20px;
      text-align: center;
      z-index: 100;
    }
    #bsod {
      background: #0000AA;
      color: white;
      font-size: 24px;
    }
    #certificate {
      background: #fdf6e3;
      color: black;
      font-size: 22px;
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div id="game">
    <div id="score">‚òï: 0</div>
    <div class="player" id="player"></div>
    <div id="bsod"></div>
    <div id="certificate"></div>
  </div>

<script>
  const game = document.getElementById('game');
  const player = document.getElementById('player');
  const scoreBoard = document.getElementById('score');
  const bsod = document.getElementById('bsod');
  const certificate = document.getElementById('certificate');

  let score = 0;
  let playerX = 100;
  let playerY = 100;
  let hardMode = false;

  function movePlayer(dx, dy) {
    playerX = Math.max(0, Math.min(window.innerWidth - 40, playerX + dx));
    playerY = Math.max(0, Math.min(window.innerHeight - 40, playerY + dy));
    player.style.left = playerX + 'px';
    player.style.top = playerY + 'px';
  }

  document.addEventListener('keydown', e => {
    switch(e.key) {
      case 'ArrowLeft': movePlayer(-20, 0); break;
      case 'ArrowRight': movePlayer(20, 0); break;
      case 'ArrowUp': movePlayer(0, -20); break;
      case 'ArrowDown': movePlayer(0, 20); break;
    }
  });

  function spawn(type) {
    const el = document.createElement('div');
    el.classList.add(type);
    el.style.left = Math.random() * (window.innerWidth - 40) + 'px';
    el.style.top = Math.random() * (window.innerHeight - 40) + 'px';
    game.appendChild(el);
    return el;
  }

  function checkCollision(a, b) {
    const ar = a.getBoundingClientRect();
    const br = b.getBoundingClientRect();
    return !(
      ar.right < br.left ||
      ar.left > br.right ||
      ar.bottom < br.top ||
      ar.top > br.bottom
    );
  }

  setInterval(() => {
    const bug = spawn('bug');
    if (hardMode) {
      bug.style.transition = 'all 2s linear';
      const x = Math.random() * (window.innerWidth - 40);
      const y = Math.random() * (window.innerHeight - 40);
      bug.style.left = x + 'px';
      bug.style.top = y + 'px';
    }
    setTimeout(() => bug.remove(), 3000);

    if (!hardMode || Math.random() < 0.3) {
      const coffee = spawn('coffee');
      setTimeout(() => coffee.remove(), 5000);
    }
  }, 2000);

  setInterval(() => {
    document.querySelectorAll('.bug').forEach(bug => {
      if (checkCollision(player, bug)) {
        bsod.style.display = 'flex';
        bsod.innerHTML = `
          <h1>:(</h1>
          <p>–ú–∞—Ç–≤–µ–π —Å—Ç–æ–ª–∫–Ω—É–ª—Å—è —Å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º –±–∞–≥–æ–º: ERROR_CODE_COFFEE_NOT_FOUND</p>
          <p>–°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—Å—è... –º–æ–∂–µ—Ç –±—ã—Ç—å.</p>
          <button onclick="location.reload()">–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –±–∏–ª–¥</button>
        `;
      }
    });

    document.querySelectorAll('.coffee').forEach(coffee => {
      if (checkCollision(player, coffee)) {
        score++;
        scoreBoard.textContent = '‚òï: ' + score;
        coffee.remove();
        if (score === 5) {
          hardMode = true;
          game.style.background = '#330000';
          alert('üî• –†–µ–∂–∏–º "–ê–¥—Å–∫–∏–π –•–∞–∫–∞—Ç–æ–Ω" –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω! –ë–∞–≥–∏ –Ω–∞—á–∏–Ω–∞—é—Ç –¥–≤–∏–≥–∞—Ç—å—Å—è, –∫–æ—Ñ–µ –ø–æ—á—Ç–∏ –Ω–µ—Ç!');
        }
        if (score >= 10) {
          certificate.style.display = 'flex';
          certificate.innerHTML = `
            <h2>–°–ï–†–¢–ò–§–ò–ö–ê–¢</h2>
            <p>–í—ã–¥–∞–Ω –ú–∞—Ç–≤–µ—é –∑–∞ –≥–µ—Ä–æ–∏—á–µ—Å–∫—É—é –ø–æ–±–µ–¥—É –Ω–∞–¥ –±–∞–≥–∞–º–∏, —Å–æ–±—Ä–∞–Ω–Ω—ã–π –∫–æ—Ñ–µ–∏–Ω –∏ —Å–ø–∞—Å—ë–Ω–Ω—ã–π –±–∏–ª–¥.</p>
            <p>–¢–µ–ø–µ—Ä—å –æ–Ω –¥–æ—Å—Ç–æ–∏–Ω –∑–≤–∞–Ω–∏—è Junior Bug Slayer!</p>
            <button onclick="location.reload()">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
          `;
        }
      }
    });
  }, 100);
</script>
</body>
</html>
